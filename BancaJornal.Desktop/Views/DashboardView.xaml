<UserControl x:Class="BancaJornal.Desktop.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:BancaJornal.Desktop.ViewModels"
             Loaded="UserControl_Loaded">
    
    <Grid Background="{StaticResource BackgroundColor}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Título -->
        <TextBlock Grid.Row="0" Text="Dashboard" FontSize="24" FontWeight="Bold" 
                   Foreground="{StaticResource TextPrimaryColor}" Margin="0,0,0,20"/>

        <!-- Cards de métricas -->
        <Grid Grid.Row="1" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Card: Produtos em Estoque -->
            <Border Grid.Column="0" Background="{StaticResource SurfaceColor}" 
                    CornerRadius="8" Padding="20" Margin="5">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="Produtos em Estoque" FontSize="14" 
                               Foreground="{StaticResource TextSecondaryColor}"/>
                    <TextBlock Text="{Binding ProdutosEmEstoque}" FontSize="32" 
                               FontWeight="Bold" Foreground="{StaticResource PrimaryColor}"/>
                </StackPanel>
            </Border>

            <!-- Card: Estoque Baixo -->
            <Border Grid.Column="1" Background="{StaticResource SurfaceColor}" 
                    CornerRadius="8" Padding="20" Margin="5">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="Estoque Baixo" FontSize="14" 
                               Foreground="{StaticResource TextSecondaryColor}"/>
                    <TextBlock Text="{Binding ProdutosComEstoqueBaixo}" FontSize="32" 
                               FontWeight="Bold" Foreground="#F44336"/>
                </StackPanel>
            </Border>

            <!-- Card: Vendas do Mês -->
            <Border Grid.Column="2" Background="{StaticResource SurfaceColor}" 
                    CornerRadius="8" Padding="20" Margin="5">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="Vendas do Mês" FontSize="14" 
                               Foreground="{StaticResource TextSecondaryColor}"/>
                    <TextBlock Text="{Binding VendasMesCorrente}" FontSize="32" 
                               FontWeight="Bold" Foreground="{StaticResource SecondaryColor}"/>
                </StackPanel>
            </Border>

            <!-- Card: Total Vendas -->
            <Border Grid.Column="3" Background="{StaticResource SurfaceColor}" 
                    CornerRadius="8" Padding="20" Margin="5">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="Total Vendas (R$)" FontSize="14" 
                               Foreground="{StaticResource TextSecondaryColor}"/>
                    <TextBlock Text="{Binding TotalVendasMesCorrente, StringFormat='{}{0:N2}'}" 
                               FontSize="32" FontWeight="Bold" Foreground="#4CAF50"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Produtos Mais Vendidos -->
        <Border Grid.Row="2" Background="{StaticResource SurfaceColor}" 
                CornerRadius="8" Padding="20" Margin="5">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
            </Border.Effect>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="Produtos Mais Vendidos no Mês" 
                           FontSize="18" FontWeight="Bold" 
                           Foreground="{StaticResource TextPrimaryColor}" Margin="0,0,0,15"/>

                <DataGrid Grid.Row="1" ItemsSource="{Binding ProdutosMaisVendidos}" 
                          AutoGenerateColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Produto" Binding="{Binding NomeProduto}" 
                                            Width="*" FontSize="14"/>
                        <DataGridTextColumn Header="Quantidade" Binding="{Binding QuantidadeVendida}" 
                                            Width="120" FontSize="14"/>
                        <DataGridTextColumn Header="Valor Total (R$)" 
                                            Binding="{Binding ValorTotal, StringFormat='{}{0:N2}'}" 
                                            Width="150" FontSize="14"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
    </Grid>
</UserControl>
